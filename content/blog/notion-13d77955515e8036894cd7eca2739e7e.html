---
title: Novus v0.0.4 released ðŸš€
tags:
  - golang
date: '2024-11-14T15:58:48.503Z'
slug: novus-v0-0-4-released
draft: false
---

<article id="13d77955-515e-8036-894c-d7eca2739e7e" class="page sans"><div class="page-body"><p id="13e77955-515e-80a9-ab39-d34d6352e8d2" class="">Ever since <a href="https://jozefcipa.com/blog/novus-local-https-proxy-for-better-developer-experience/">releasing</a> the first version of the binary, I knew there were more things I wanted to add and improve in <em>Novus</em>. There have been a couple of smaller releases since then, but it was only bug fixes I stumbled across while using the binary.</p><p id="13e77955-515e-806d-ac7f-fd2aa14ee82c" class="">Finally, the time for a bigger release has come and version 0.0.4 adds, apart from the bug fixes and minor improvements, also some new features that I believe will enhance the developer experience even more.</p><h2 id="13e77955-515e-80c8-949c-e390f8620475" class="">Whatâ€™s new?</h2><p id="13e77955-515e-807a-8dd5-cbef2542cd82" class=""><strong>Internal dashboard</strong></p><p id="13e77955-515e-8007-b410-c7bf666d5937" class="">First of all, letâ€™s talk about the dashboard. Previously, if you wanted to see what routes were actively configured within <em>Novus </em>you would have to go into the terminal and run <code>novus status</code> which would show you a table similar to this:</p><figure id="13e77955-515e-80e8-930a-d125863261f0" class="image"><a href="https://assets.jozefcipa.com/blog/13d77955515e8036894cd7eca2739e7e/cli.png"><img style="width:2094px" src="https://assets.jozefcipa.com/blog/13d77955515e8036894cd7eca2739e7e/cli.png"></a></figure><p id="13e77955-515e-8043-8716-f5b056c18242" class="">Now, version v0.0.4 introduces a website <a href="https://index.novus/">index.novus</a> which presents the same information directly in your browser, so you can always quickly check whatâ€™s currently running before having to go to the terminal. </p><p id="13e77955-515e-800f-9043-c80daa65e058" class="">Yay!</p><figure id="13e77955-515e-80bb-9c39-e705463ab0d1" class="image"><a href="https://assets.jozefcipa.com/blog/13d77955515e8036894cd7eca2739e7e/web.png"><img style="width:707.9921875px" src="https://assets.jozefcipa.com/blog/13d77955515e8036894cd7eca2739e7e/web.png"></a></figure><p id="13e77955-515e-80b1-afdf-f9ac2a6a7289" class="">
</p><p id="13e77955-515e-80fb-ab20-ea8fabad17c6" class=""><strong>Detect existing top-level domains (TLDs)</strong></p><p id="13e77955-515e-8041-a637-d28f773d3fa3" class="">Previously, when you configured your routes in the <em>novus.yml</em> file, there were no restrictions on what the URL could look like. </p><p id="13e77955-515e-80ab-8138-f61ab4004282" class="">If you were (by any chance) building your own Google, you could configure your <em>novus.yml</em> like this:</p><pre id="13e77955-515e-8077-90e9-c09a623a30c3" class="code"><code class="language-YAML">appName: my-google
routes:
  - domain: google.com
    upstream: http://localhost:3000</code></pre><p id="13e77955-515e-8021-b844-fb646f59d140" class="">While <em>Novus</em> could handle this and <a href="http://google.com/">google.com</a> would point to <a href="http://localhost:3000/">localhost:3000</a>, this would also impact all other <code>.com</code> domains publicly available on the internet. That means, your computer would no longer resolve <code><a href="http://instagram.com/">instagram.com</a></code> nor <code><a href="http://github.com/">github.com</a></code> as <em>Novus</em> configured <code>.com</code> TLD to be resolved by the locally running DNSMasq instance. No bueno!</p><p id="13e77955-515e-8080-b6da-c3a701b60efa" class="">This is now fixed by improving the input config file validation and TLD domains are forbidden, so you can no longer define a route ending with an existing TLD domain.</p><p id="13e77955-515e-809d-a5a6-e633e4904c87" class="">Instead, you should choose a prefix that is not publicly registered - a good example would be <code>.test</code>.</p><p id="13e77955-515e-80e1-ae1a-fb60a93f5097" class="">
</p><p id="13e77955-515e-803f-946a-d827aa95e7dd" class=""><strong>Updated error pages</strong></p><p id="13e77955-515e-80cf-89da-d742321ec83f" class=""><em>Novus </em>has had custom error pages since the very beginning, so when you navigate to an unknown route it would show a nice 404 page instead of the default Nginx error page. Similarly, if a route exists but the upstream server is not running, Nginx returns a 502 error.</p><p id="13e77955-515e-80fd-9218-cc62068c1f8e" class="">With this release, these pages got a new fresh look. But you will have to see them for yourself ðŸ˜‰. Furthermore, the 502 error page now continuously checks whether the upstream connection has been restored and automatically reloads the page.</p><p id="13e77955-515e-804e-9bf5-ec8b3225b5df" class="">
</p><p id="13e77955-515e-8052-8e04-fb816ed3b65d" class=""><strong>Better Nginx &amp; DNSMasq control</strong></p><p id="13e77955-515e-80dd-8f90-e502e9e581a7" class="">Before, it could happen that a service (Nginx, DNSMasq) was restarted but the websites wouldnâ€™t work. <em>Novus </em>would say that everything had been restarted properly and was running again. This was because it didnâ€™t check whether the service started properly. This could typically happen when there was a configuration error in Nginx (during development) or when a TCP port was already used by another service. In such cases, the service would error out silently.</p><p id="13e77955-515e-80e5-b69f-c69772cd01e1" class="">This is now fixed by checking the service status and verifying it is running after restarting. Moreover, <em>Novus</em> will always check whether the ports are available before starting a service. </p><p id="13e77955-515e-8013-9eba-f683b3d5a51b" class="">
</p><p id="13e77955-515e-800f-852d-faeae2d77545" class=""><strong>Using an alternative DNS port</strong></p><p id="13e77955-515e-8082-bca6-c68306fafae8" class="">In addition to the previous point, in some environments, the DNS port 53 might be utilized by a different service. This means that the DNSMasq service fails to start and instead exits silently as described above. </p><p id="13e77955-515e-80dc-a675-d7429cdd742c" class="">To mitigate this issue <em>Novus</em> now uses an alternative port (5053) for the DNS service.</p><p id="13e77955-515e-805d-b876-d5ee7b10ebcd" class="">
</p><p id="13e77955-515e-80d0-87b4-c2b2e015a0cf" class=""><strong>Added </strong><code><strong>start</strong></code><strong> command</strong></p><p id="13e77955-515e-80d4-b425-f5330283fb38" class="">The first version of <em>Novus </em>already came with the <code>stop</code> command that allows you to quickly shut down Nginx and DNSMasq if needed. However, there was no command to start the services again. You would have to go to a specific directory with the <em>novus.yml </em>file inside and call <code>novus serve</code> which would go through the whole process of reading the config, evaluating routes, and starting the services.</p><p id="13e77955-515e-805d-83d9-c5fee08a7a63" class="">Now, there is a better alternative - <em>Novus v0.0.4</em> adds the <code>start</code> command that only starts Nginx and DNSMasq services and doesnâ€™t need the config file present, which means you can now start and stop <em>Novus</em> from any directory.</p><p id="13e77955-515e-8084-899d-d8077676d8fa" class="">
</p><p id="13e77955-515e-8086-8e2e-c434097c3580" class=""><strong>Improved validation messages</strong></p><p id="13e77955-515e-808e-9d6d-c82676fd5a00" class="">When working on the first version, I didnâ€™t bother too much to make the validation errors super nice, instead, I relied on the default messages provided by the validation library.</p><p id="13e77955-515e-80b2-b4aa-c41374bde422" class="">While working on the new version, I could no longer neglect this important part of the developer experience. Therefore, v0.0.4 now brings more developer-friendly error messages when validating the <em>novus.yml </em>config file.</p><h2 id="13e77955-515e-80f5-8493-c42a20f3808d" class=""><strong>How to update</strong></h2><p id="13e77955-515e-8070-a6b2-c887b9809333" class="">As this project is still evolving and doesnâ€™t have a stable version at the moment, breaking changes between the releases are to be expected and backward compatibility is not guaranteed!</p><p id="13e77955-515e-80df-a87b-ed2b0689150f" class="">This version contains some changes in the internal state file, therefore it needs to be recreated by <em>Novus.</em></p><p id="13e77955-515e-80e5-a56a-cdd4935db238" class="">That means you should remove all your apps, remove the old version, install the new version, and add the apps again.</p><pre id="13e77955-515e-8037-aaa9-c39c3981b65b" class="code"><code class="language-Bash"># Uninstall the old version
$ novus remove [app] # Run for all your apps
$ brew uninstall novus
$ brew untap jozefcipa/novus

# Install the new version
$ brew tap jozefcipa/novus
$ brew install novus</code></pre><p id="13e77955-515e-805e-8799-dd02825a7b48" class="">
</p><p id="13e77955-515e-802a-904c-f61907ef54a0" class="">Sorry for the inconvenience, Iâ€™m sure the future releases will become more stable.</p><p id="13e77955-515e-8050-a0f3-c9b8b8b1862e" class="">If youâ€™re still curious and want to see the changes in detail, refer to the <a href="https://github.com/jozefcipa/novus/releases/tag/v0.0.4">release v0.0.4 </a>on GitHub, and by the way, there are already several ideas for v0.0.5, so stay tuned!</p><p id="13e77955-515e-80a7-b7b5-d7c0fdc9b14d" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span>